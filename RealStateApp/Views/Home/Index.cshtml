@model List<PropertyViewModel>
@inject IHttpContextAccessor httpContextAccessor

@{
    ViewData["Title"] = "Home";

    AuthenticationResponse user = new();
    var admin = httpContextAccessor.HttpContext.Session.Get<AuthenticationResponse>(Roles.Admin.ToString());
    var agent = httpContextAccessor.HttpContext.Session.Get<AuthenticationResponse>(Roles.Agent.ToString());
    var client = httpContextAccessor.HttpContext.Session.Get<AuthenticationResponse>(Roles.Client.ToString());
    var developer = httpContextAccessor.HttpContext.Session.Get<AuthenticationResponse>(Roles.Developer.ToString());

    if (admin != null)
    {
        user = admin;
    }
    else if (agent != null)
    {
        user = agent;
    }
    else if (client != null)
    {
        user = client;
    }
    else
    {
        user = developer;
    }
}

@if (user == agent)
{
    <section class="hero-bg h-screen flex items-center text-white">
        <div class="container">
            <div class="max-w-lg px-24">
                <h1 class="text-5xl font-bold mb-4">Paradisus Inmobiliarias</h1>
                <h2 class="text-3xl mb-6">Find your dream home with us. We aim to help you live the life of your dreams with the best services.</h2>
                <a href="#contact" class="bg-yellow-500 text-black px-8 py-4 rounded-md hover:bg-yellow-600 text-lg">Contact Us</a>
                <p class="text-lg mt-4">Over 2k+ clients satisfied</p>
            </div>
        </div>
    </section>

    <section class="py-12 bg-gray-100">
        <div class="container mx-auto px-6 md:px-12 lg:px-24">
            <h2 class="text-4xl font-bold mb-8">All Properties</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                @foreach (var property in Model)
                {
                    @await Component.InvokeAsync("PropertyCard", property)
                }
            </div>
        </div>
    </section>
}
else 
{
    <div class="flex h-screen">
        <!-- Left Sidebar -->
        <div class="w-1/4 p-4">
            <div class="flex flex-col items-center">
                <img src="/assets/hero.jpeg" alt="Company Logo" class="mb-8" style="width: 100px;">
                <button class="bg-red-500 text-white px-4 py-2 rounded-md mb-8">Log out</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="w-3/4 flex items-center justify-center">
            <div class="grid grid-cols-3 gap-8">
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/agents">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Agents</span>
                    </div>
                </a>
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/administrators">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Administrators</span>
                    </div>
                </a>
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/developers">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Developers</span>
                    </div>
                </a>
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/property-types">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Property Types</span>
                    </div>
                </a>
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/sell-types">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Sell Types</span>
                    </div>
                </a>
                <a class="bg-gray-700 text-white text-center rounded-md block p-4" href="/amenities">
                    <div class="flex flex-col items-center">
                        <svg class="w-8 h-8 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Amenities</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
}

<style>
    .hero-bg {
        background-image: url('/assets/hero.jpeg');
        background-size: cover;
        background-position: center;
    }
</style>
